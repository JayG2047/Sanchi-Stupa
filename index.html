<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Digital Tourist Guider-Bhojpur</title>
    <meta name="description" content="Explore Bhojpur Temple with the Digital Tourist Guider. Scan a QR to unlock a full guide with photos, videos, audio tours, and AR/3D models of the temple." />
    <meta name="theme-color" content="#1f5eff" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <style>
        :root{
            --brand:#1f5eff; --ink:#0e1320; --muted:#6b7280; --bg:#f6f7fb; --card:#ffffff; --accent:#05c46b; --warn:#ff8b00;
        }
        html,body{height:100%}
        body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg);}
        .navbar{backdrop-filter:saturate(180%) blur(10px); background:rgba(255,255,255,.85);}
        .hero{min-height:86vh; display:flex; align-items:center; position:relative; overflow:hidden; background:linear-gradient(180deg,#eef2ff 0%, #f8fafc 100%);}
        .hero video{position:absolute; right:-8%; bottom:-14%; width:820px; opacity:.22; pointer-events:none; border-radius:24px; filter:saturate(1.06) contrast(1.05);}
        .badge-soft{background:#e9f1ff; color:#2450ff; border:1px solid #cfe0ff;}
        .section-title{font-weight:800; letter-spacing:-.02em;}
        .card{border:1px solid #eef0f5; box-shadow:0 6px 18px rgba(16,24,40,.06); background:var(--card);}
        .btn-brand{background:var(--brand); color:#fff; border:none;}
        .btn-brand:hover{background:#1747d6; color:#fff;}
        .btn-ghost{border:1px solid #dbe2f2; background:#fff; color:#0f172a;}
        .chip{display:inline-flex; align-items:center; gap:.5rem; padding:.35rem .65rem; border-radius:999px; background:#f1f5f9; color:#0f172a; font-weight:600; font-size:.85rem;}
        .pill{padding:.35rem .65rem; border-radius:999px; background:#e8fff3; color:#0f9d58; font-weight:600; font-size:.8rem; display:inline-block;}
        .ticker{display:flex; gap:24px; white-space:nowrap; animation:marquee 18s linear infinite;}
        @keyframes marquee{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
        .gallery img{object-fit:cover; border-radius:12px; width:100%; height:100%;}
        .map-embed{border:0; width:100%; height:360px; border-radius:12px;}
        .note{font-size:.92rem; color:var(--muted);}
        .stat{font-weight:800; font-size:1.15rem;}
        .qr-box{background:linear-gradient(180deg,#ffffff 0%,#f2f6ff 100%); border:1px dashed #cbd5e1; border-radius:14px; padding:18px;}
        .floating-translate{
            position:fixed; right:14px; bottom:14px; z-index:9999; background:var(--brand); color:#fff; border-radius:999px; padding:.6rem .9rem; box-shadow:0 10px 24px rgba(31,94,255,.28); cursor:pointer; display:flex; align-items:center; gap:.5rem;
        }
        .floating-contrast{
            position:fixed; right:14px; bottom:64px; z-index:9999; background:#111827; color:#fff; border-radius:999px; padding:.5rem .8rem; opacity:.9; cursor:pointer;
        }
        /* AI chat widget */
        .chat-widget{
            position:fixed; right:14px; bottom:120px; z-index:9998; width:min(380px,92vw); max-height:65vh;
            display:flex; flex-direction:column; border-radius:16px; background:#fff; border:1px solid #e5e7eb; box-shadow:0 18px 48px rgba(0,0,0,.08);
            overflow:hidden; transform:translateY(10px); opacity:0; pointer-events:none; transition:all .2s ease;
        }
        .chat-widget.open{transform:translateY(0); opacity:1; pointer-events:auto;}
        .chat-head{padding:.6rem .9rem; background:#f8faff; border-bottom:1px solid #e5e7eb; display:flex; justify-content:space-between; align-items:center;}
        .chat-body{padding:.75rem; overflow:auto; display:flex; flex-direction:column; gap:.6rem; background:#fff;}
        .msg{max-width:85%; padding:.55rem .7rem; border-radius:12px; font-size:.92rem;}
        .me{align-self:flex-end; background:#e9f1ff;}
        .ai{align-self:flex-start; background:#f1f5f9;}
        .chat-input{display:flex; gap:.5rem; padding:.6rem; border-top:1px solid #e5e7eb; background:#fff;}
        .badge-price{background:#f6ffed; color:#0f9d58; border:1px solid #bbf7d0; padding:.15rem .45rem; border-radius:8px; font-weight:600;}
        .a11y-high-contrast{filter:contrast(1.2) saturate(1.05)}
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg sticky-top">
    </div>
        <div class="container">
            <a class="navbar-brand fw-bold" href="#"><span style="color:var(--brand)">DTG</span> Digital Tourist Guider</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav"><span class="navbar-toggler-icon"></span></button>
            <div id="nav" class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto align-items-lg-center">
                    <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="#features">Features</a></li>
                    <li class="nav-item"><a class="nav-link" href="#demo">Demo</a></li>
                    <li class="nav-item"><a class="nav-link" href="#ar">AR/3D</a></li>
                    <li class="nav-item"><a class="nav-link" href="#itinerary">Itinerary</a></li>
                    <li class="nav-item"><a class="nav-link" href="#pricing">Prices</a></li>
                    <li class="nav-item"><a class="nav-link" href="#destinations">Destinations</a></li>
                    <li class="nav-item"><a class="btn btn-brand btn-sm ms-lg-2" href="#contact">Start Your Adventure</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <header id="home" class="hero">
        <video autoplay muted loop playsinline src="C:\Users\ADMIN\Desktop\smart india hackthon\dtg\places\Bhojapur">BHOJPUR</video>
        <div class="container py-5 position-relative">
            <div class="row align-items-center g-4">
                <div class="col-lg-7" data-aos="fade-right">
                    <span class="badge badge-soft mb-3" id="heroTag">Your Smart Companion for Every Journey</span>
                    <h1 class="display-5 mb-3">Team "Scan & Explore"</h1>
                    <p class="lead text-secondary" id="heroLead">Instant multimedia guides at any spot. Photos, videos, audio tours, AR overlays, AI chat — in your language, online or offline.</p>
                    <div class="d-flex gap-3 pt-2">
                        <a href="#demo" class="btn btn-brand btn-lg">Try a Demo</a>
                        <a href="#features" class="btn btn-ghost btn-lg">See Features</a>
                    </div>
                    <div class="mt-4">
                        <div class="ticker">
                            <span class="pill">Low data</span>
                            <span class="pill">Offline mode</span>
                            <span class="pill">Multilingual</span>
                            <span class="pill">AR/3D</span>
                            <span class="pill">AI chat</span>
                            <span class="pill">Transparent prices</span>
                        </div>
                    </div>
                </div>
                <div class="col-lg-5" data-aos="zoom-in">
                    <div class="card p-4">
                        <h5>Why travelers choose DTG</h5>
                        <ul class="text-secondary mb-0">
                            <li><strong>Instant clarity:</strong> No searching, just scan.</li>
                            <li><strong>Right info:</strong> Curated, verified, up-to-date.</li>
                            <li><strong>Budget-friendly:</strong> Standard price bands and tips.</li>
                            <li><strong>Inclusive:</strong> Multi-language + audio narration.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <section id="features" class="py-5 bg-white">
        <div class="container">
            <h2 class="section-title mb-3">New-generation features</h2>
            <div class="row g-4">
                <div class="col-md-6 col-lg-3" data-aos="fade-up">
                    <div class="card p-3 h-100">
                        <div class="chip">🎧 Smart audio tours</div>
                        <p class="text-secondary mt-2">Location-aware audio that plays as you approach highlights.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="75">
                    <div class="card p-3 h-100">
                        <div class="chip">🧭 AR overlays</div>
                        <p class="text-secondary mt-2">Point your phone to reveal history, hidden gems, cultural tips.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="150">
                    <div class="card p-3 h-100">
                        <div class="chip">📶 Offline mode</div>
                        <p class="text-secondary mt-2">Download guides; works in low or no connectivity.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="225">
                    <div class="card p-3 h-100">
                        <div class="chip">🌐 Multilingual</div>
                        <p class="text-secondary mt-2">Switch language instantly, with bilingual audio.</p>
                    </div>
                </div>
            </div>
            <div class="row g-4 mt-1">
                <div class="col-md-6 col-lg-3" data-aos="fade-up">
                    <div class="card p-3 h-100">
                        <div class="chip">🤖 AI chat assistant</div>
                        <p class="text-secondary mt-2">Ask about timings, safety, prices, directions — get instant answers.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="75">
                    <div class="card p-3 h-100">
                        <div class="chip">🛡️ Safety & help</div>
                        <p class="text-secondary mt-2">Emergency numbers, etiquette, on-site tips, report issues via QR.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="150">
                    <div class="card p-3 h-100">
                        <div class="chip">💸 Price transparency</div>
                        <p class="text-secondary mt-2">Stay and transport price bands to prevent overcharging.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="225">
                    <div class="card p-3 h-100">
                        <div class="chip">🧩 White-label</div>
                        <p class="text-secondary mt-2">Tourism boards can use DTG tech under their own brand.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="demo" class="py-5">
        <div class="container">
            <h2 class="section-title mb-3">Try the demo</h2>
            <div class="row g-4">
                <div class="col-lg-5" data-aos="fade-right">
                    <div class="card p-4 h-100">
                        <h5>Generate a micro-guide QR for Bhojpur</h5>
                        <div class="row g-2">
                            <div class="col-sm-6">
                                <label class="form-label"><strong>Stop ID:</strong></label>
                                <input id="stopId" class="form-control" value="bhojpur-sanctum">
                            </div>
                            <div class="col-sm-6">
                                <label class="form-label"><strong>Language:</strong></label>
                                <select id="lang" class="form-select">
                                    <option value="en" selected>English</option>
                                    <option value="hi">हिंदी</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label class="form-label"><strong>Deep link:</strong></label>
                                <input id="deepLink" class="form-control" readonly>
                            </div>
                        </div>
                        <div class="d-flex align-items-center gap-2 mt-3">
                            <button class="btn btn-brand" onclick="makeQR()">Create QR</button>
                            <button class="btn btn-ghost" onclick="downloadQR()">Download PNG</button>
                            <a id="openLink" class="btn btn-ghost" target="_blank" rel="noopener">Open</a>
                        </div>
                        <div class="qr-box mt-3 d-flex align-items-center justify-content-center" style="min-height:180px;">
                            <div id="qrcode"></div>
                        </div>
                        <p class="note mt-2">Use stable stop IDs. Update content server-side — no QR reprints.</p>
                    </div>
                </div>
                <div class="col-lg-7" data-aos="fade-left">
                    <div class="card p-4 h-100">
                        <h5>Preview: audio + quick tips</h5>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label mb-1"><strong>Audio tour (EN):</strong></label>
                                <audio controls src=""></audio>
                            </div>
                            <div class="col-md-6">
                                <label class="form-label mb-1"><strong>ऑडियो टूर (हिंदी):</strong></label>
                                <audio controls src=""></audio>
                            </div>
                        </div>
                        <ul class="text-secondary mt-3 mb-0">
                            <li><strong>Emergency:</strong> 112 | <strong>Ambulance:</strong> 108</li>
                            <li><strong>Transport:</strong> Bhopal ↔ Bhojpur ~30 km; taxi 50–70 min; buses frequent</li>
                            <li><strong>Etiquette:</strong> Footwear off, silence near sanctum, no flash</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="ar" class="py-5 bg-white">
        <div class="container">
            <h2 class="section-title mb-3">Explore in AR and 3D</h2>
            <p class="text-secondary">Rotate a 3D model or place it in your space (AR supported devices). Replace the model with your GLB/GLTF.</p>
            <div class="card p-3" data-aos="fade-up">
                <model-viewer src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" ar ar-modes="webxr scene-viewer quick-look"
                    camera-controls auto-rotate environment-image="neutral"
                    style="width:100%; height:420px; background:#f8fafc; border-radius:12px;">
                    <div slot="ar-button" class="btn btn-brand" style="position:absolute; left:16px; bottom:16px;">View in AR</div>
                </model-viewer>
                <p class="note mt-2"></p>
            </div>
        </div>
    </section>

    <section id="itinerary" class="py-5">
        <div class="container">
            <h2 class="section-title mb-3">Build your time-smart itinerary for Any Tourist Place in Bhopal</h2>
            <p class="text-secondary">Select your interests and time budget. Get a clear, efficient plan — synced to QR stops.</p>
            <div class="row g-4">
                <div class="col-lg-5" data-aos="fade-right">
                    <div class="card p-4 h-100">
                        <div class="row g-2">
                            <div class="col-6">
                                <label class="form-label"><strong>Hours available:</strong></label>
                                <input id="hours" type="number" min="1" max="12" value="4" class="form-control">
                            </div>
                            <div class="col-6">
                                <label class="form-label"><strong>Pace:</strong></label>
                                <select id="pace" class="form-select">
                                    <option value="relaxed">Relaxed</option>
                                    <option value="balanced" selected>Balanced</option>
                                    <option value="intense">Intense</option>
                                </select>
                            </div>
                            <div class="col-12">
                                <label class="form-label"><strong>Interests:</strong></label>
                                <div class="d-flex flex-wrap gap-2">
                                    <label class="chip"><input type="checkbox" class="form-check-input me-1" value="history" checked>History</label>
                                    <label class="chip"><input type="checkbox" class="form-check-input me-1" value="architecture" checked>Architecture</label>
                                    <label class="chip"><input type="checkbox" class="form-check-input me-1" value="nature">Nature</label>
                                    <label class="chip"><input type="checkbox" class="form-check-input me-1" value="photo">Photo spots</label>
                                    <label class="chip"><input type="checkbox" class="form-check-input me-1" value="food">Local food</label>
                                </div>
                            </div>
                            <div class="col-12 mt-2">
                                <button class="btn btn-brand w-100" onclick="buildPlan()">Generate plan</button>
                            </div>
                        </div>
                        <p class="note mt-2 mb-0">Pro tip: Pair with offline pack to avoid connectivity delays.</p>
                    </div>
                </div>
                <div class="col-lg-7" data-aos="fade-left">
                    <div class="card p-4 h-100">
                        <h5>Your plan</h5>
                        <ol id="planList" class="text-secondary mb-0"></ol>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="pricing" class="py-5 bg-white">
        <div class="container">
            <h2 class="section-title mb-3">Transparent prices and quick budget</h2>
            <div class="row g-4">
                <div class="col-lg-6" data-aos="fade-right">
                    <div class="card p-4 h-100">
                        <h6>Stay price bands (indicative)</h6>
                        <ul class="text-secondary">
                            <li><span class="badge-price">Budget:</span> 800–1,500 INR/night</li>
                            <li><span class="badge-price">Mid:</span> 1,500–3,500 INR/night</li>
                            <li><span class="badge-price">Luxury:</span> 3,500+ INR/night</li>
                        </ul>
                        <div class="d-grid gap-2">
                            <a class="btn btn-ghost" href="#" target="_blank" rel="noopener">Hotels near site</a>
                            <a class="btn btn-ghost" href="#" target="_blank" rel="noopener">Homestays & guest houses</a>
                        </div>
                        <p class="note mt-2">Ranges vary by season and events; check live deals.</p>
                    </div>
                </div>
                <div class="col-lg-6" data-aos="fade-left">
                    <div class="card p-4 h-100">
                        <h6>Day-trip budget calculator</h6>
                        <div class="row g-2">
                            <div class="col-6">
                                <label class="form-label"><strong>Travel:</strong></label>
                                <input id="costTravel" type="number" class="form-control" placeholder="e.g., 500">
                            </div>
                            <div class="col-6">
                                <label class="form-label"><strong>Food:</strong></label>
                                <input id="costFood" type="number" class="form-control" placeholder="e.g., 300">
                            </div>
                            <div class="col-6">
                                <label class="form-label"><strong>Tickets:</strong></label>
                                <input id="costTickets" type="number" class="form-control" placeholder="e.g., 50">
                            </div>
                            <div class="col-6">
                                <label class="form-label"><strong>Misc:</strong></label>
                                <input id="costMisc" type="number" class="form-control" placeholder="e.g., 200">
                            </div>
                        </div>
                        <div class="d-flex align-items-center gap-2 mt-3">
                            <button class="btn btn-brand" onclick="calcBudget()">Calculate</button>
                            <div><strong>Total:</strong> <span id="budgetTotal">—</span> INR</div>
                        </div>
                        <p class="note mt-2 mb-0">Goal: predictable costs, fewer surprises.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="destinations" class="py-5">
        <div class="container">
            <h2 class="section-title mb-3">Destinations and map</h2>
            <p class="text-secondary">Replace with your live city guides and custom map. Each pin links to a QR micro-guide.</p>
            <div class="row g-4">
                <div class="col-md-5" data-aos="fade-right">
                    <div class="card p-3 h-100">
                        <h6>Featured regions</h6>
                        <ul class="mb-0 text-secondary">
                            <li><strong>Bhopal:</strong> Bhojpur Temple, Sanchi Stupa, Upper Lake</li>
<div class="ratio ratio-16x9 mb-3">
                       <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3669.913432395652!2d77.5798173!3d23.1002646!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x397c3814866a0055%3A0xe0dca67e894e60f4!2sBhojeshwar%20Mahadev%20Temple!5e0!3m2!1sen!2sin!4v1757763764630!5m2!1sen!2sin" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    <div class="d-flex flex-wrap gap-2">
                        </ul>
                        <div class="mt-2"><span class="pill">Heritage</span> <span class="pill">Nature</span> <span class="pill">Architecture</span></div>
                    </div>
                </div>
                <div class="col-md-7" data-aos="fade-left">
                        <a class="btn btn-ghost btn-sm" href="#demo">Bhojpur Demo</a>
                        <a class="btn btn-ghost btn-sm" href="#demo">Sanchi Demo</a>
                        <a class="btn btn-ghost btn-sm" href="#demo">Raipur Fort Demo</a>
                        <a class="btn btn-ghost btn-sm" href="#demo">Manua-Bhan Tekri</a>
                        <a class="btn btn-ghost btn-sm" href="#demo">Bhojtal Demo</a>
                        <a class="btn btn-ghost btn-sm" href="#demo">Gufa Demo</a>
                    </div>
    
                </div>
            </div>
        </div>
    </section>

    <footer id="contact" class="py-5 bg-white">
        <div class="container">
            <div class="row g-4">
                <div class="col-md-6">
                    <h5 class="fw-bold"><span style="color:var(--brand)">Digital Tourist Guider</span></h5>
                    <p class="note mb-1">Built for clarity, speed, and on-ground usefulness.</p>
                    <p class="note">© <span id="year"></span> DTG • Offline-ready • Privacy-aware • Low-data</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a class="me-3" href="#features">Features</a>
                    <a class="me-3" href="#pricing">Prices</a>
                    <a class="me-3" href="#destinations">Destinations</a>
                    <a class="btn btn-brand btn-sm" href="#demo">Get Started</a>
                </div>
            </div>
        </div>
    </footer>

    <button class="floating-contrast" onclick="toggleContrast()" title="High contrast">◐</button>
    <div class="floating-translate" onclick="toggleLang()"><span>🌐</span><span id="floatLang">EN</span></div>

    <div id="chat" class="chat-widget">
        <div class="chat-head">
            <strong>DTG Assistant</strong>
            <div class="d-flex align-items-center gap-2">
                <button class="btn btn-sm btn-ghost" onclick="seedChat()">Tips</button>
                <button class="btn btn-sm btn-brand" onclick="toggleChat()">Close</button>
            </div>
        </div>
        <div id="chatBody" class="chat-body">
            <div class="msg ai">Hi! Ask me about timings, safety, prices, directions, or hidden spots.</div>
        </div>
        <div class="chat-input">
            <input id="chatInput" class="form-control" placeholder="Type your question... (e.g., temple timing)">
            <button class="btn btn-brand" onclick="sendChat()">Send</button>
        </div>
    </div>
    <div style="position:fixed; right:14px; bottom:120px; z-index:9999;">
        <button id="chatBtn" class="btn btn-brand btn-lg" onclick="toggleChat()">💬 Ask DTG</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>

    <script>
        // Init
        AOS.init({ once:true, duration:600, easing:'ease-out' });
        document.getElementById('year').textContent = new Date().getFullYear();

        // Language strings
        const strings = {
            en: {
                heroTag: "Your Smart Companion for Every Journey",
                heroLead: "Instant multimedia guides at any spot. Photos, videos, audio tours, AR overlays, AI chat — in your language, online or offline."
            },
            hi: {
                heroTag: "हर यात्रा के लिए आपका स्मार्ट साथी",
                heroLead: "किसी भी स्थान पर त्वरित मल्टीमीडिया गाइड। फोटो, वीडियो, ऑडियो, AR, AI चैट — आपकी भाषा में, ऑनलाइन या ऑफलाइन।"
            }
        };
        function setLang(lang){
            localStorage.setItem('lang', lang);
            document.getElementById('floatLang').textContent = (lang==='en'?'EN':'हिं');
            document.getElementById('heroTag').textContent = strings[lang].heroTag;
            document.getElementById('heroLead').textContent = strings[lang].heroLead;
        }
        function toggleLang(){
            const cur = localStorage.getItem('lang') || 'en';
            setLang(cur==='en' ? 'hi' : 'en');
        }
        setLang(localStorage.getItem('lang') || 'en');

        // High contrast
        function toggleContrast(){
            document.body.classList.toggle('a11y-high-contrast');
        }

        // QR generator
        const baseUrl = 'https://dtg.example.com/guide'; // TODO: replace with your domain/PWA route
        let qr;
        function makeQR(){
            const stopId = document.getElementById('stopId').value.trim() || 'bhojpur-sanctum';
            const lang = document.getElementById('lang').value;
            const url = `${baseUrl}?site=bhojpur&stop=${encodeURIComponent(stopId)}&lang=${lang}`;
            document.getElementById('deepLink').value = url;
            document.getElementById('openLink').href = url;
            const node = document.getElementById('qrcode');
            node.innerHTML='';
            qr = new QRCode(node, { text:url, width:180, height:180, colorDark:"#111827", colorLight:"#ffffff", correctLevel:QRCode.CorrectLevel.M });
        }
        function downloadQR(){
            if(!qr) makeQR();
            const canvas = document.querySelector('#qrcode canvas');
            if(!canvas) return alert('Generate QR first.');
            const a = document.createElement('a');
            a.href = canvas.toDataURL('image/png');
            a.download = 'dtg-qr.png'; a.click();
        }
        makeQR();

        // Budget calculator
        function n(id){ return Number(document.getElementById(id).value || 0); }
        function calcBudget(){
            const total = n('costTravel') + n('costFood') + n('costTickets') + n('costMisc');
            document.getElementById('budgetTotal').textContent = total.toLocaleString('en-IN');
        }

        // Itinerary builder (simple heuristic)
        // Add or modify stops here to change the itinerary for your specific location.
        const stops = [
            { id:'bhojpur-gate', label:'Bhojpur Temple Entrance', mins:15, tags:['history', 'architecture'] },
            { id:'bhojpur-sanctum', label:'Sanctum and Shivalingam', mins:25, tags:['history', 'architecture'] },
            { id:'bhojpur-river', label:'Betwa River Viewpoint', mins:20, tags:['nature', 'photo'] },
            { id:'bhojpur-dam', label:'Bhojpur Lake & Dam Site', mins:20, tags:['history', 'nature'] },
            { id:'bhojpur-food', label:'Local food vendors near the temple', mins:20, tags:['food'] }
        ];
        function buildPlan(){
            const hours = Math.max(1, Math.min(12, Number(document.getElementById('hours').value || 4)));
            const pace = document.getElementById('pace').value;
            const selected = [...document.querySelectorAll('#itinerary input[type="checkbox"]:checked')].map(x=>x.value);
            const budgetMins = hours * (pace==='relaxed'?45:(pace==='intense'?75:60)); // minutes of active exploring per hour
            // score stops by tag overlap and pack greedily
            const scored = stops.map(s => ({...s, score: s.tags.filter(t=>selected.includes(t)).length || 0.5}));
            scored.sort((a,b)=> b.score - a.score || a.mins - b.mins);
            const plan = [];
            let t=0;
            for(const s of scored){
                if(t + s.mins <= budgetMins){ plan.push(s); t += s.mins; }
            }
            const list = document.getElementById('planList'); list.innerHTML='';
            if(plan.length===0){ list.innerHTML = '<li>No stops fit. Reduce pace or increase hours.</li>'; return; }
            let acc=0;
            plan.forEach((p,i)=>{
                acc += p.mins;
                const li = document.createElement('li');
                li.innerHTML = `<strong>${p.label}</strong> — ${p.mins} min <span class="note">(ETA ${Math.round(acc/60)}h ${acc%60}m)</span>`;
                list.appendChild(li);
            });
        }
        buildPlan();

        // AI chat (rule-based stub; integrate backend later)
        function toggleChat(){ document.getElementById('chat').classList.toggle('open'); }
        function seedChat(){
            const tips = [
                "Best light for photos: Early morning or late afternoon (golden hour).",
                "Wear comfortable shoes as the temple grounds are large.",
                "Scan the QR plaques at different spots for a full experience.",
                "Respect the religious customs; remove footwear before entering the temple."
            ];
            tips.forEach(t => addMsg('ai', t));
        }
        function addMsg(role, text){
            const el = document.createElement('div');
            el.className = 'msg ' + (role==='me'?'me':'ai');
            el.textContent = text; const body = document.getElementById('chatBody');
            body.appendChild(el); body.scrollTop = body.scrollHeight;
        }
        function sendChat(){
            const input = document.getElementById('chatInput');
            const q = input.value.trim(); if(!q) return; addMsg('me', q); input.value='';
            const t = q.toLowerCase();
            let a = "Here's what I found for you.";
            if(t.includes('time')||t.includes('timing')||t.includes('open')) a = "Typical visiting hours are 6am–7pm. Please confirm locally as hours can change on festival days.";
            else if(t.includes('price')||t.includes('ticket')) a = "Entry to the Bhojpur Temple is free. Parking fees are minimal. Local guide services may cost extra.";
            else if(t.includes('safety')||t.includes('emergency')) a = "Emergency number is 112. It's a safe place, but keep your valuables secure and stay on designated paths.";
            else if(t.includes('transport')||t.includes('bus')||t.includes('taxi')||t.includes('distance')) a = "Bhojpur is about 30 km from Bhopal. Taxis are the most convenient option, taking about an hour. Local buses are also available.";
            else if(t.includes('food')) a = "You can find local food stalls and tea vendors outside the temple complex. Look for 'Dal Bafle' a local delicacy.";
            else if(t.includes('audio')||t.includes('video')) a = "Open the Demo section for short reels and 60-120s audio in EN/HI.";
            else if(t.includes('ar')||t.includes('3d')) a = "Use the AR section to rotate the model or place it in your space (supported devices).";
            addMsg('ai', a);
        }

        // PWA register (add sw.js in site root)
        if('serviceWorker' in navigator){ window.addEventListener('load', ()=>navigator.serviceWorker.register('/sw.js')); }
    </script>
</body>
</html>